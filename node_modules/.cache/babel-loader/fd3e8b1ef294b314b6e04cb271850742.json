{"ast":null,"code":"var _jsxFileName = \"/home/muthoni/ecommerce/src/ShoppingCart.jsx\";\nimport React, { Component } from \"react\";\nimport Product from \"./Product\";\nexport default class ShoppingCart extends Component {\n  //Executes when the component is mounted\n  constructor(props) {\n    //console.log(\"constructor - ShoppingCart\");\n    super(props); //calling super class's constructor\n    //initialization of the state\n\n    this.componentDidMount = async () => {\n      //send request to server\n      var response = await fetch(\"http://192.168.0.129:5000/products\", {\n        method: \"GET\"\n      }); //the following code executes after receiving response from server\n      //converting the response body into a JS object array\n\n      var prods = await response.json(); //the following code executes after converting response body into JS object array\n\n      console.log(prods); //updating products into component's state\n\n      this.setState({\n        products: prods\n      }); //console.log(\"componentDidMount - ShoppingCart\");\n    };\n\n    this.handleIncrement = (product, maxValue) => {\n      //get index of selected product\n      let allProducts = [...this.state.products];\n      let index = allProducts.indexOf(product);\n\n      if (allProducts[index].quantity < maxValue) {\n        allProducts[index].quantity++; //update the state of current component (parent component)\n\n        this.setState({\n          products: allProducts\n        });\n      }\n    };\n\n    this.handleDecrement = (product, minValue) => {\n      //get index of selected product\n      let allProducts = [...this.state.products];\n      let index = allProducts.indexOf(product);\n\n      if (allProducts[index].quantity > minValue) {\n        allProducts[index].quantity--; //update the state of current component (parent component)\n\n        this.setState({\n          products: allProducts\n        });\n      }\n    };\n\n    this.handleDelete = product => {\n      //get index of selected product\n      let allProducts = [...this.state.products];\n      let index = allProducts.indexOf(product);\n\n      if (window.confirm(\"Are you sure to delete?\")) {\n        //delete product based on index\n        allProducts.splice(index, 1); //update the state of current component (parent component)\n\n        this.setState({\n          products: allProducts\n        });\n      }\n    };\n\n    this.state = {\n      products: []\n    };\n  }\n\n  render() {\n    //console.log(\"render - ShoppingCart\");\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 9\n      }\n    }, \"Shopping Cart\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }\n    }, this.state.products.map(prod => {\n      return /*#__PURE__*/React.createElement(Product, {\n        key: prod.id,\n        product: prod,\n        onIncrement: this.handleIncrement,\n        onDecrement: this.handleDecrement,\n        onDelete: this.handleDelete,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 17\n        }\n      }, \"Buy Now\"));\n    })));\n  } // render ends here\n  //Executes after constructor and render method (includes life cycle of child components, if any) of current component\n\n\n  componentDidUpdate(prevProps, prevState) {\n    /*console.log(\n      \"componentDidUpdate - ShoppingCart\",\n      prevProps,\n      prevState,\n      this.props,\n      this.state\n    );*/\n    // if (prevProps.x != this.props.x) {\n    //   //make http call\n    // }\n  } //Executes when the current instance of current component is being deleted from memory\n\n\n  componentWillUnmount() {//console.log(\"componentWillUnmount - ShoppingCart\");\n  }\n\n  componentDidCatch(error, info) {\n    //console.log(\"componentDidCatch - ShoppingCart\");\n    //console.log(error, info);\n    localStorage.lastError = `${error}\\n${JSON.stringify(info)}`;\n  } //executes when the user clicks on + button.\n\n\n}","map":{"version":3,"sources":["/home/muthoni/ecommerce/src/ShoppingCart.jsx"],"names":["React","Component","Product","ShoppingCart","constructor","props","componentDidMount","response","fetch","method","prods","json","console","log","setState","products","handleIncrement","product","maxValue","allProducts","state","index","indexOf","quantity","handleDecrement","minValue","handleDelete","window","confirm","splice","render","map","prod","id","componentDidUpdate","prevProps","prevState","componentWillUnmount","componentDidCatch","error","info","localStorage","lastError","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Product from \"./Product\";\n\nexport default class ShoppingCart extends Component {\n  //Executes when the component is mounted\n  constructor(props) {\n    //console.log(\"constructor - ShoppingCart\");\n    super(props); //calling super class's constructor\n\n    //initialization of the state\n    this.state = {\n      products: [],\n    };\n  }\n\n  render() {\n    //console.log(\"render - ShoppingCart\");\n\n    return (\n      <div>\n        <h4>Shopping Cart</h4>\n\n        <div className=\"row\">\n          {this.state.products.map((prod) => {\n            return (\n              <Product\n                key={prod.id}\n                product={prod}\n                onIncrement={this.handleIncrement}\n                onDecrement={this.handleDecrement}\n                onDelete={this.handleDelete}\n              >\n                <button className=\"btn btn-primary\">Buy Now</button>\n              </Product>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n  // render ends here\n\n  //Executes after constructor and render method (includes life cycle of child components, if any) of current component\n  componentDidMount = async () => {\n    //send request to server\n    var response = await fetch(\"http://192.168.0.129:5000/products\", {\n      method: \"GET\",\n    });\n\n    //the following code executes after receiving response from server\n    //converting the response body into a JS object array\n    var prods = await response.json();\n\n    //the following code executes after converting response body into JS object array\n    console.log(prods);\n\n    //updating products into component's state\n    this.setState({ products: prods });\n\n    //console.log(\"componentDidMount - ShoppingCart\");\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    /*console.log(\n      \"componentDidUpdate - ShoppingCart\",\n      prevProps,\n      prevState,\n      this.props,\n      this.state\n    );*/\n    // if (prevProps.x != this.props.x) {\n    //   //make http call\n    // }\n  }\n\n  //Executes when the current instance of current component is being deleted from memory\n  componentWillUnmount() {\n    //console.log(\"componentWillUnmount - ShoppingCart\");\n  }\n\n  componentDidCatch(error, info) {\n    //console.log(\"componentDidCatch - ShoppingCart\");\n    //console.log(error, info);\n\n    localStorage.lastError = `${error}\\n${JSON.stringify(info)}`;\n  }\n\n  //executes when the user clicks on + button.\n  handleIncrement = (product, maxValue) => {\n    //get index of selected product\n    let allProducts = [...this.state.products];\n    let index = allProducts.indexOf(product);\n\n    if (allProducts[index].quantity < maxValue) {\n      allProducts[index].quantity++;\n\n      //update the state of current component (parent component)\n      this.setState({ products: allProducts });\n    }\n  };\n\n  //executes when the user clicks on - button.\n  handleDecrement = (product, minValue) => {\n    //get index of selected product\n    let allProducts = [...this.state.products];\n    let index = allProducts.indexOf(product);\n\n    if (allProducts[index].quantity > minValue) {\n      allProducts[index].quantity--;\n\n      //update the state of current component (parent component)\n      this.setState({ products: allProducts });\n    }\n  };\n\n  //executes when the user clicks on Delete (X) button in the Product component.\n  handleDelete = (product) => {\n    //get index of selected product\n    let allProducts = [...this.state.products];\n    let index = allProducts.indexOf(product);\n\n    if (window.confirm(\"Are you sure to delete?\")) {\n      //delete product based on index\n      allProducts.splice(index, 1);\n\n      //update the state of current component (parent component)\n      this.setState({ products: allProducts });\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}